{"version":3,"file":"AlbumAPI.js","sourceRoot":"","sources":["../../../../src/lib/album/AlbumAPI.ts"],"names":[],"mappings":";;;;;;AAEA,iEAAyC;AACzC,0CAA2C;AAC3C,wEAAgD;AAChD,+DAAuC;AASvC,MAAqB,QAAQ;IAC3B,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,MAA6B;QAChD,MAAM,cAAc,GAAG,MAAM,kBAAQ,CAAC,YAAY,EAAE,CAAC;QACrD,MAAM,IAAI,GAAG;YACX,YAAY,EAAE,cAAc,CAAC,OAAO;YACpC,gBAAgB,EAAE,MAAM,kBAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,gBAAgB,EAAE,CAAC,CAAC;YACtE,iBAAiB,EAAE,MAAM,kBAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,iBAAiB,EAAE,EAAE,CAAC;YACzE,cAAc,EAAE,MAAM,CAAC,cAAc,KAAK,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,KAAK;SACpF,CAAC;QACF,MAAM,IAAI,GAAG,MAAM,IAAA,iBAAS,EAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAC9C,OAAO,yBAAe,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IAC/C,CAAC;CACF;AAZD,2BAYC;AAED,MAAa,eAAgB,SAAQ,QAAQ;IAC3C,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,MAA6B;QAChD,OAAO,iBAAO,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;IACvD,CAAC;CACF;AAJD,0CAIC","sourcesContent":["import Album from '../types/Album';\nimport { ImageFormat } from '../types/Image';\nimport ImageAPI from '../image/ImageAPI';\nimport { fetchPage } from '../utils/Fetch';\nimport AlbumInfoParser from './AlbumInfoParser';\nimport Limiter from '../utils/Limiter';\n\nexport interface AlbumAPIGetInfoParams {\n  albumUrl: string;\n  albumImageFormat?: string | number | ImageFormat;\n  artistImageFormat?: string | number | ImageFormat;\n  includeRawData?: boolean;\n}\n\nexport default class AlbumAPI {\n  static async getInfo(params: AlbumAPIGetInfoParams): Promise<Album> {\n    const imageConstants = await ImageAPI.getConstants();\n    const opts = {\n      imageBaseUrl: imageConstants.baseUrl,\n      albumImageFormat: await ImageAPI.getFormat(params.albumImageFormat, 9),\n      artistImageFormat: await ImageAPI.getFormat(params.artistImageFormat, 21),\n      includeRawData: params.includeRawData !== undefined ? params.includeRawData : false\n    };\n    const html = await fetchPage(params.albumUrl);\n    return AlbumInfoParser.parseInfo(html, opts);\n  }\n}\n\nexport class LimiterAlbumAPI extends AlbumAPI {\n  static async getInfo(params: AlbumAPIGetInfoParams): Promise<Album> {\n    return Limiter.schedule(() => super.getInfo(params));\n  }\n}\n"]}